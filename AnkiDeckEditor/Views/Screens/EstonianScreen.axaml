<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:AnkiDeckEditor.ViewModels"
             xmlns:fluentContentDialog="clr-namespace:AnkiDeckEditor"
             xmlns:controls="clr-namespace:AnkiDeckEditor.Controls"
             xmlns:estonianScreen="clr-namespace:AnkiDeckEditor.Controls.Tabs.EstonianScreen"
             mc:Ignorable="d"
             d:DesignWidth="1024"
             d:DesignHeight="768"
             d:DataContext="{x:Static fluentContentDialog:App.EstonianScreen}"
             x:Class="AnkiDeckEditor.Views.Screens.EstonianScreen"
             x:DataType="vm:EstonianScreenViewModel"
             x:CompileBindings="True">
    <DockPanel x:Name="MyDockPanel">
        <controls:AdeToolbar DockPanel.Dock="Top" />

        <!-- Tabs -->

        <TabControl Name="DeckConfigTabControl" DockPanel.Dock="Top">

            <!-- MainEntity Anki field -->

            <TabItem Header="Словарная статья">
                <estonianScreen:VocabularyEntry />
            </TabItem>

            <!-- Non-verb word forms -->

            <TabItem Header="Формы слова"
                     Name="WordFormsTabItem"
                     IsVisible="{Binding IsWordFormsTabItemVisible}">

                <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,Auto"
                      RowDefinitions="Auto,Auto,Auto,Auto,Auto">
                    <TextBlock Grid.Column="2"
                               Grid.Row="0"
                               Text="Единственное число:" />
                    <TextBlock Grid.Column="4"
                               Grid.Row="0"
                               Text="Множественное число:" />
                    <TextBlock Grid.Column="0"
                               Grid.Row="1"
                               Text="Именительный падеж:" />
                    <TextBlock Grid.Column="0"
                               Grid.Row="2"
                               Text="Родительный падеж:" />
                    <TextBlock Grid.Column="0"
                               Grid.Row="3"
                               Text="Партитив:" />
                    <TextBlock Grid.Column="0"
                               Grid.Row="4"
                               Grid.ColumnSpan="4"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center"
                               Text="Короткая форма иллатива:" />

                    <Grid RowDefinitions="Auto" ColumnDefinitions="Auto,Auto"
                          Grid.Column="2"
                          Grid.Row="1">
                        <TextBox Name="NominativeCaseSingularWordForm"
                                 Text="{Binding NominativeCaseSingularWordForm}"
                                 MinWidth="341"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=NominativeCaseSingularWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto" ColumnDefinitions="Auto,Auto"
                          Grid.Column="4"
                          Grid.Row="1">
                        <TextBox Name="NominativeCasePluralWordForm"
                                 Text="{Binding NominativeCasePluralWordForm}"
                                 MinWidth="341"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=NominativeCasePluralWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto" ColumnDefinitions="Auto,Auto"
                          Grid.Column="2"
                          Grid.Row="2">
                        <TextBox Name="GenitiveCaseSingularWordForm"
                                 Text="{Binding GenitiveCaseSingularWordForm}"
                                 MinWidth="341"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=GenitiveCaseSingularWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto" ColumnDefinitions="Auto,Auto"
                          Grid.Column="4"
                          Grid.Row="2">
                        <TextBox Name="GenitiveCasePluralWordForm"
                                 Text="{Binding GenitiveCasePluralWordForm}"
                                 MinWidth="341"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=GenitiveCasePluralWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto" ColumnDefinitions="Auto,Auto"
                          Grid.Column="2"
                          Grid.Row="3">
                        <TextBox Name="PartitiveCaseSingularWordForm"
                                 Text="{Binding PartitiveCaseSingularWordForm}"
                                 MinWidth="341"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=PartitiveCaseSingularWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto" ColumnDefinitions="Auto,Auto"
                          Grid.Column="4"
                          Grid.Row="3">
                        <TextBox Name="PartitiveCasePluralWordForm"
                                 Text="{Binding PartitiveCasePluralWordForm}"
                                 MinWidth="341"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=PartitiveCasePluralWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto" ColumnDefinitions="Auto,Auto"
                          Grid.Column="4"
                          Grid.Row="4">
                        <TextBox Name="ShortIllativeCaseWordForm"
                                 Text="{Binding ShortIllativeCaseWordForm}"
                                 MinWidth="341"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=ShortIllativeCaseWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>

                </Grid>
            </TabItem>

            <!-- Verb forms -->

            <TabItem Header="Формы глагола"
                     IsVisible="{Binding IsVerbFormsTabItemVisible}"
                     Name="VerbFormsTabItem">
                <Grid ColumnDefinitions="*,*"
                      RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto">

                    <TextBlock Text="MA-инфинитив:"
                               Grid.Column="0"
                               Grid.Row="0" />
                    <TextBlock Text="DA-инфинитив:"
                               Grid.Column="0"
                               Grid.Row="2" />
                    <TextBlock Text="Изъявительное наклонение (3 лицо):"
                               Grid.Column="0"
                               Grid.Row="4" />
                    <!-- todo: tooltip: страдательное причастие прошедшего времени -->
                    <TextBlock Text="Причастие (страд., прош.):"
                               Grid.Column="0"
                               Grid.Row="6" />

                    <TextBlock Text="Изъявительное наклонение (3 лицо, прош.):"
                               Grid.Column="1"
                               Grid.Row="0" />
                    <!-- todo: tooltip: действительное причастие прошедшего времени -->
                    <TextBlock Text="Причастие (действ.б прош.):"
                               Grid.Column="1"
                               Grid.Row="2" />
                    <TextBlock Text="Повелительное наклонение (ед.ч.):"
                               Grid.Column="1"
                               Grid.Row="4" />
                    <TextBlock Text="Страдательный залог (наст.):"
                               Grid.Column="1"
                               Grid.Row="6" />


                    <TextBlock Text="Управление глагола:"
                               HorizontalAlignment="Center"
                               Grid.Column="0"
                               Grid.Row="8"
                               Grid.ColumnSpan="2" />

                    <!-- Text Boxes -->

                    <Grid RowDefinitions="Auto"
                          ColumnDefinitions="Auto,Auto"
                          Grid.Column="0"
                          Grid.Row="1">
                        <TextBox Name="MaInfinitiveWordForm"
                                 MinWidth="341"
                                 Text="{Binding MaInfinitiveWordForm}"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=MaInfinitiveWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>

                    <Grid RowDefinitions="Auto"
                          ColumnDefinitions="Auto,Auto"
                          Grid.Column="0"
                          Grid.Row="3">
                        <TextBox Name="DaInfinitiveWordForm"
                                 MinWidth="341"
                                 Text="{Binding DaInfinitiveWordForm}"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=DaInfinitiveWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto"
                          ColumnDefinitions="Auto,Auto"
                          Grid.Column="0"
                          Grid.Row="5">
                        <TextBox Name="IndicativeMoodWordForm"
                                 MinWidth="341"
                                 Text="{Binding IndicativeMoodWordForm}"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=IndicativeMoodWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto"
                          ColumnDefinitions="Auto,Auto"
                          Grid.Column="0"
                          Grid.Row="7">
                        <TextBox Name="PassiveParticiplePastTenseWordForm"
                                 MinWidth="341"
                                 Text="{Binding PassiveParticiplePastTenseWordForm}"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=PassiveParticiplePastTenseWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto"
                          ColumnDefinitions="Auto,Auto"
                          Grid.Column="1"
                          Grid.Row="1">
                        <TextBox Name="ThirdPersonPastTenseWordForm"
                                 MinWidth="341"
                                 Text="{Binding ThirdPersonPastTenseWordForm}"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=ThirdPersonPastTenseWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto"
                          ColumnDefinitions="Auto,Auto"
                          Grid.Column="1"
                          Grid.Row="3">
                        <TextBox Name="ActiveParticipleWordForm"
                                 MinWidth="341"
                                 Text="{Binding ActiveParticipleWordForm}"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=ActiveParticipleWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto"
                          ColumnDefinitions="Auto,Auto"
                          Grid.Column="1"
                          Grid.Row="5">
                        <TextBox Name="ImperativeMoodSingularWordForm"
                                 MinWidth="341"
                                 Text="{Binding ImperativeMoodSingularWordForm}"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=ImperativeMoodSingularWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <Grid RowDefinitions="Auto"
                          ColumnDefinitions="Auto,Auto"
                          Grid.Column="1"
                          Grid.Row="7">
                        <TextBox Name="PassiveVoicePresentTenseWordForm"
                                 MinWidth="341"
                                 Text="{Binding PassiveVoicePresentTenseWordForm}"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=PassiveVoicePresentTenseWordForm}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>

                    <!-- Управление глагола -->
                    <Panel Name="VerbControl"
                           Grid.ColumnSpan="2"
                           Grid.Column="0"
                           Grid.Row="9">
                        <Border HorizontalAlignment="Center"
                                Width="341"
                                Height="170"
                                BorderThickness="1"
                                BorderBrush="Azure">
                            <ScrollViewer VerticalScrollBarVisibility="Auto"
                                          HorizontalScrollBarVisibility="Auto">
                                <ItemsRepeater Margin="10,0,0,0"
                                               ItemsSource="{Binding VerbControlItems}">
                                    <ItemsRepeater.Layout>
                                        <StackLayout Spacing="0"
                                                     Orientation="Vertical" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <CheckBox IsChecked="{Binding IsChecked}"
                                                          Content="{Binding Title}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </ScrollViewer>
                        </Border>
                    </Panel>
                </Grid>
            </TabItem>

            <!-- Context -->

            <TabItem Header="Контекст">

                <StackPanel>
                    <TextBlock Text="Дословный:" />
                    <TextBox x:Name="WordForWordTextBox"
                             Tag="WordByWordTranslationAnkiField"
                             TextChanged="WordForWordTextBox_OnTextChanged" />

                    <TextBlock Text="Выделение:" />

                    <ScrollViewer HorizontalScrollBarVisibility="Auto">
                        <ItemsRepeater ItemsSource="{Binding WordByWordContextSelectedItems}">
                            <ItemsRepeater.Layout>
                                <StackLayout Spacing="0"
                                             Orientation="Horizontal" />
                            </ItemsRepeater.Layout>
                            <ItemsRepeater.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <ToggleButton IsChecked="{Binding IsChecked}"
                                                      IsVisible="{Binding !IsPunctuation}"
                                                      Content="{Binding Title}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   IsVisible="{Binding IsPunctuation}"
                                                   Text="{Binding Title}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsRepeater.ItemTemplate>
                        </ItemsRepeater>
                    </ScrollViewer>

                    <TextBlock Text="Литературный:" />

                    <Grid RowDefinitions="Auto" ColumnDefinitions="*,*">
                        <TextBox Name="LiteraryTextBox"
                                 Tag="LiteraryTranslationAnkiField"
                                 TextChanged="WordForWordTextBox_OnTextChanged"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=LiteraryTextBox}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <TextBlock Text="Выделение:" />

                    <ScrollViewer HorizontalScrollBarVisibility="Auto">
                        <ItemsRepeater ItemsSource="{Binding LiteraryContextSelectedItems}">
                            <ItemsRepeater.Layout>
                                <StackLayout Spacing="0"
                                             Orientation="Horizontal" />
                            </ItemsRepeater.Layout>
                            <ItemsRepeater.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <ToggleButton IsChecked="{Binding IsChecked}"
                                                      IsVisible="{Binding !IsPunctuation}"
                                                      Content="{Binding Title}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   IsVisible="{Binding IsPunctuation}"
                                                   Text="{Binding Title}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsRepeater.ItemTemplate>
                        </ItemsRepeater>
                    </ScrollViewer>

                    <TextBlock Text="Оригинал:" />

                    <Grid RowDefinitions="Auto" ColumnDefinitions="*,*">
                        <TextBox Name="OriginalTextBox"
                                 Tag="OriginalAnkiField"
                                 TextChanged="WordForWordTextBox_OnTextChanged"
                                 Grid.Column="0"
                                 Grid.Row="0" />
                        <Button Content="Paste"
                                Command="{Binding PasteFromClipboardCommand}"
                                CommandParameter="{Binding ElementName=OriginalTextBox}"
                                Grid.Column="1"
                                Grid.Row="0" />
                    </Grid>
                    <TextBlock Text="Выделение:" />

                    <ScrollViewer HorizontalScrollBarVisibility="Auto">
                        <ItemsRepeater ItemsSource="{Binding OriginalContextSelectedItems}">
                            <ItemsRepeater.Layout>
                                <StackLayout Spacing="0"
                                             Orientation="Horizontal" />
                            </ItemsRepeater.Layout>
                            <ItemsRepeater.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <ToggleButton IsChecked="{Binding IsChecked}"
                                                      IsVisible="{Binding !IsPunctuation}"
                                                      Content="{Binding Title}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   IsVisible="{Binding IsPunctuation}"
                                                   Text="{Binding Title}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsRepeater.ItemTemplate>
                        </ItemsRepeater>
                    </ScrollViewer>
                </StackPanel>

            </TabItem>
            <!-- 
        Actions
        -->
            <TabItem Header="Действия">

                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="Копирование полей отдельно:" />


                    <Button Content="Управление глагола"
                            CommandParameter="{Binding RelativeSource={RelativeSource Self}}"
                            Tag="VerbControlAnkiField"
                            Command="{Binding CopyFieldClipboardCommand}" />
                    <!-- <Button Content="Словарная статья" -->
                    <!--         CommandParameter="{Binding ElementName=MainEntityAnkiFieldTextBox}" -->
                    <!--         Tag="MainEntityAnkiField" -->
                    <!--         Command="{Binding CopyFieldClipboardCommand}" /> -->
                    <Button Name="ExitButton"
                            Content="Exit"
                            Command="{Binding CopyButtonCommand}" />
                </StackPanel>
            </TabItem>
        </TabControl>

    </DockPanel>
</UserControl>